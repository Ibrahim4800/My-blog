<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blog</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            margin-bottom: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .new-post-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .new-post-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            align-items: start;
        }

        .blog-feed {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .blog-post {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .blog-post:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .post-title {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .post-date {
            color: #718096;
            font-size: 14px;
        }

        .post-preview {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .post-media {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 15px;
        }

        .sidebar {
            position: sticky;
            top: 20px;
        }

        .ad-space {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ad-placeholder {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 60px 20px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 18px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 25px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 25px 25px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .file-input {
            position: relative;
            display: inline-block;
            cursor: pointer;
            width: 100%;
        }

        .file-input input[type=file] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-input-label {
            display: block;
            padding: 12px 16px;
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 12px;
            text-align: center;
            color: #4a5568;
            transition: all 0.3s ease;
        }

        .file-input:hover .file-input-label {
            background: #edf2f7;
            border-color: #667eea;
        }

        .publish-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .publish-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .comments-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
        }

        .comments-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #2d3748;
        }

        .comment-form {
            background: #f7fafc;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .comment-form input,
        .comment-form textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .comment-btn {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .comment-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(66, 153, 225, 0.4);
        }

        .comment {
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .comment-author {
            font-weight: 600;
            color: #2d3748;
        }

        .comment-date {
            color: #718096;
            font-size: 12px;
        }

        .comment-content {
            color: #4a5568;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .reply-btn {
            background: none;
            border: none;
            color: #667eea;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            text-decoration: underline;
        }

        .reply-form {
            margin-top: 15px;
            margin-left: 20px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
            display: none;
        }

        .replies {
            margin-left: 20px;
            margin-top: 10px;
        }

        .reply {
            background: #f7fafc;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 3px solid #4299e1;
        }

        .admin-login {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .admin-btn {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
        }

        .admin-controls {
            display: none;
            position: absolute;
            top: 15px;
            right: 15px;
            gap: 10px;
        }

        .admin-controls.show {
            display: flex;
        }

        .edit-btn, .delete-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .edit-btn {
            background: #4299e1;
            color: white;
        }

        .edit-btn:hover {
            background: #3182ce;
            transform: translateY(-1px);
        }

        .delete-btn {
            background: #e53e3e;
            color: white;
        }

        .delete-btn:hover {
            background: #c53030;
            transform: translateY(-1px);
        }

        .admin-status {
            color: #38a169;
            font-size: 12px;
            margin-top: 5px;
        }

        .login-form {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            min-width: 250px;
        }

        .login-form input {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .login-form input:focus {
            outline: none;
            border-color: #f093fb;
        }

        .login-btn {
            width: 100%;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .logout-btn {
            background: #e53e3e;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
        }

        .ad-edit-btn {
            background: #4299e1;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
            display: none;
        }

        .ad-edit-btn.show {
            display: block;
        }

        .ad-form {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .ad-form input, .ad-form textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .ad-form textarea {
            height: 80px;
            resize: vertical;
        }

        .save-ad-btn {
            background: #38a169;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
                order: -1;
            }
            
            .modal-content {
                width: 95%;
                margin: 10px auto;
            }
        }
    </style>
</head>
<body>
    <div class="admin-login">
        <div id="adminPanel">
            <button class="admin-btn" onclick="toggleAdminLogin()">Admin</button>
            <div id="adminStatus" class="admin-status" style="display: none;">Admin Mode Active</div>
        </div>
        <div id="loginForm" class="login-form" style="display: none;">
            <input type="password" id="adminPassword" placeholder="Admin Password">
            <button class="login-btn" onclick="adminLogin()">Login</button>
            <button class="logout-btn" onclick="adminLogout()">Logout</button>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">My Blog</div>
                <button class="new-post-btn" id="newPostBtn" onclick="openNewPostModal()" style="display: none;">New Post</button>
            </div>
        </header>

        <div class="main-content">
            <div class="blog-feed" id="blogFeed">
                <!-- Sample blog posts will be added here -->
            </div>

            <div class="sidebar">
                <div class="ad-space">
                    <div class="ad-placeholder" id="adContent">
                        Advertisement Space
                        <br><br>
                        Your Ad Here
                    </div>
                    <button class="ad-edit-btn" id="adEditBtn" onclick="toggleAdEditor()">Edit Ad</button>
                    <div class="ad-form" id="adForm">
                        <input type="text" id="adTitle" placeholder="Ad Title">
                        <textarea id="adDescription" placeholder="Ad Description"></textarea>
                        <input type="url" id="adLink" placeholder="Ad Link (optional)">
                        <input type="file" id="adImage" accept="image/*">
                        <button class="save-ad-btn" onclick="saveAd()">Save Ad</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- New Post Modal -->
    <div id="newPostModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Post</h2>
                <span class="close" onclick="closeNewPostModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="newPostForm">
                    <div class="form-group">
                        <label for="postTitle">Post Title</label>
                        <input type="text" id="postTitle" name="postTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="postContent">Post Content</label>
                        <textarea id="postContent" name="postContent" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="postMedia">Upload Photo/Video</label>
                        <div class="file-input">
                            <input type="file" id="postMedia" name="postMedia" accept="image/*,video/*">
                            <div class="file-input-label">
                                Click to upload or drag and drop
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="publish-btn">Publish Post</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Post Modal -->
    <div id="editPostModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Post</h2>
                <span class="close" onclick="closeEditPostModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="editPostForm">
                    <input type="hidden" id="editPostId">
                    <div class="form-group">
                        <label for="editPostTitle">Post Title</label>
                        <input type="text" id="editPostTitle" name="editPostTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="editPostContent">Post Content</label>
                        <textarea id="editPostContent" name="editPostContent" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="editPostMedia">Upload New Photo/Video (optional)</label>
                        <div class="file-input">
                            <input type="file" id="editPostMedia" name="editPostMedia" accept="image/*,video/*">
                            <div class="file-input-label">
                                Click to upload new media or drag and drop
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="publish-btn">Update Post</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Blog Post View Modal -->
    <div id="blogPostModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalPostTitle"></h2>
                <span class="close" onclick="closeBlogPostModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="modalPostContent"></div>
                <div class="comments-section">
                    <h3 class="comments-title">Comments</h3>
                    <div class="comment-form">
                        <input type="text" id="commenterName" placeholder="Your name">
                        <textarea id="commentText" placeholder="Write your comment..."></textarea>
                        <button class="comment-btn" onclick="addComment()">Post Comment</button>
                    </div>
                    <div id="commentsContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let blogPosts = [];
        let currentPostId = null;
        let comments = {};
        let isAdminLoggedIn = false;
        let currentAdData = {
            title: "Advertisement Space",
            description: "Your Ad Here",
            link: "",
            image: null
        };

        // Admin password - in a real application, this would be handled securely on the server
        const ADMIN_PASSWORD = "Elboraei1*";

        function toggleAdminLogin() {
            const loginForm = document.getElementById('loginForm');
            loginForm.style.display = loginForm.style.display === 'none' ? 'block' : 'none';
        }

        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                isAdminLoggedIn = true;
                document.getElementById('adminStatus').style.display = 'block';
                document.getElementById('newPostBtn').style.display = 'block';
                document.getElementById('adEditBtn').classList.add('show');
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('adminPassword').value = '';
                showAdminControls();
                alert('Admin login successful!');
            } else {
                alert('Incorrect password!');
            }
        }

        function adminLogout() {
            isAdminLoggedIn = false;
            document.getElementById('adminStatus').style.display = 'none';
            document.getElementById('newPostBtn').style.display = 'none';
            document.getElementById('adEditBtn').classList.remove('show');
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('adForm').style.display = 'none';
            hideAdminControls();
            alert('Admin logged out!');
        }

        function showAdminControls() {
            const adminControls = document.querySelectorAll('.admin-controls');
            adminControls.forEach(control => control.classList.add('show'));
        }

        function hideAdminControls() {
            const adminControls = document.querySelectorAll('.admin-controls');
            adminControls.forEach(control => control.classList.remove('show'));
        }

        function editPost(postId) {
            if (!isAdminLoggedIn) {
                alert('Admin access required!');
                return;
            }
            
            const post = blogPosts.find(p => p.id === postId);
            if (!post) return;

            document.getElementById('editPostId').value = post.id;
            document.getElementById('editPostTitle').value = post.title;
            document.getElementById('editPostContent').value = post.content;
            document.getElementById('editPostModal').style.display = 'block';
        }

        function closeEditPostModal() {
            document.getElementById('editPostModal').style.display = 'none';
            document.getElementById('editPostForm').reset();
        }

        function deletePost(postId) {
            if (!isAdminLoggedIn) {
                alert('Admin access required!');
                return;
            }
            
            if (confirm('Are you sure you want to delete this post?')) {
                blogPosts = blogPosts.filter(p => p.id !== postId);
                delete comments[postId];
                renderBlogFeed();
                alert('Post deleted successfully!');
            }
        }

        function toggleAdEditor() {
            if (!isAdminLoggedIn) {
                alert('Admin access required!');
                return;
            }
            
            const adForm = document.getElementById('adForm');
            adForm.style.display = adForm.style.display === 'none' ? 'block' : 'none';
            
            // Populate current ad data
            document.getElementById('adTitle').value = currentAdData.title;
            document.getElementById('adDescription').value = currentAdData.description;
            document.getElementById('adLink').value = currentAdData.link;
        }

        function saveAd() {
            const title = document.getElementById('adTitle').value.trim();
            const description = document.getElementById('adDescription').value.trim();
            const link = document.getElementById('adLink').value.trim();
            const imageFile = document.getElementById('adImage').files[0];

            if (!title || !description) {
                alert('Please enter both title and description.');
                return;
            }

            currentAdData.title = title;
            currentAdData.description = description;
            currentAdData.link = link;

            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentAdData.image = e.target.result;
                    updateAdDisplay();
                };
                reader.readAsDataURL(imageFile);
            } else {
                updateAdDisplay();
            }

            document.getElementById('adForm').style.display = 'none';
            alert('Ad updated successfully!');
        }

        function updateAdDisplay() {
            const adContent = document.getElementById('adContent');
            let adHTML = '';
            
            if (currentAdData.image) {
                adHTML += `<img src="${currentAdData.image}" alt="Ad Image" style="width: 100%; height: auto; border-radius: 10px; margin-bottom: 10px;">`;
            }
            
            adHTML += `<div style="font-weight: 600; margin-bottom: 8px;">${currentAdData.title}</div>`;
            adHTML += `<div style="font-size: 14px; line-height: 1.4;">${currentAdData.description}</div>`;
            
            if (currentAdData.link) {
                adContent.innerHTML = `<a href="${currentAdData.link}" target="_blank" style="text-decoration: none; color: inherit;">${adHTML}</a>`;
            } else {
                adContent.innerHTML = adHTML;
            }
        }

        // Sample data
        const samplePosts = [
            {
                id: 1,
                title: "Welcome to My Blog",
                content: "This is my first blog post! I'm excited to share my thoughts and experiences with you. This platform allows me to write about various topics, share photos and videos, and engage with readers through comments.",
                date: new Date().toLocaleDateString(),
                media: null
            },
            {
                id: 2,
                title: "The Future of Web Development",
                content: "Web development is constantly evolving with new technologies and frameworks. In this post, I'll explore the latest trends and what they mean for developers and users alike. From AI integration to improved user experiences, the future looks bright.",
                date: new Date(Date.now() - 86400000).toLocaleDateString(),
                media: null
            }
        ];

        // Initialize with sample posts
        blogPosts = [...samplePosts];
        comments = {
            1: [
                {
                    id: 1,
                    author: "John Doe",
                    content: "Great first post! Looking forward to reading more.",
                    date: new Date().toLocaleDateString(),
                    replies: [
                        {
                            id: 1,
                            author: "Blog Author",
                            content: "Thank you for the encouragement!",
                            date: new Date().toLocaleDateString()
                        }
                    ]
                }
            ],
            2: []
        };

        function renderBlogFeed() {
            const blogFeed = document.getElementById('blogFeed');
            blogFeed.innerHTML = '';

            blogPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'blog-post';
                postElement.onclick = () => openBlogPost(post.id);

                let mediaContent = '';
                if (post.media) {
                    if (post.media.type.startsWith('image/')) {
                        mediaContent = `<img src="${post.media.url}" alt="Post media" class="post-media">`;
                    } else if (post.media.type.startsWith('video/')) {
                        mediaContent = `<video src="${post.media.url}" controls class="post-media"></video>`;
                    }
                }

                postElement.innerHTML = `
                    <div class="admin-controls">
                        <button class="edit-btn" onclick="editPost(${post.id})">Edit</button>
                        <button class="delete-btn" onclick="deletePost(${post.id})">Delete</button>
                    </div>
                    <div class="post-header">
                        <h2 class="post-title">${post.title}</h2>
                        <span class="post-date">${post.date}</span>
                    </div>
                    ${mediaContent}
                    <p class="post-preview">${post.content.substring(0, 200)}${post.content.length > 200 ? '...' : ''}</p>
                `;

                blogFeed.appendChild(postElement);
            });
        }

        function openNewPostModal() {
            if (!isAdminLoggedIn) {
                alert('Admin access required to create posts!');
                return;
            }
            document.getElementById('newPostModal').style.display = 'block';
        }

        function closeNewPostModal() {
            document.getElementById('newPostModal').style.display = 'none';
            document.getElementById('newPostForm').reset();
        }

        function openBlogPost(postId) {
            currentPostId = postId;
            const post = blogPosts.find(p => p.id === postId);
            
            document.getElementById('modalPostTitle').textContent = post.title;
            
            let mediaContent = '';
            if (post.media) {
                if (post.media.type.startsWith('image/')) {
                    mediaContent = `<img src="${post.media.url}" alt="Post media" class="post-media">`;
                } else if (post.media.type.startsWith('video/')) {
                    mediaContent = `<video src="${post.media.url}" controls class="post-media"></video>`;
                }
            }
            
            document.getElementById('modalPostContent').innerHTML = `
                <div style="color: #718096; font-size: 14px; margin-bottom: 20px;">${post.date}</div>
                ${mediaContent}
                <div style="line-height: 1.6; color: #4a5568;">${post.content}</div>
            `;
            
            renderComments(postId);
            document.getElementById('blogPostModal').style.display = 'block';
        }

        function closeBlogPostModal() {
            document.getElementById('blogPostModal').style.display = 'none';
            currentPostId = null;
        }

        function renderComments(postId) {
            const commentsContainer = document.getElementById('commentsContainer');
            commentsContainer.innerHTML = '';

            const postComments = comments[postId] || [];
            
            postComments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.className = 'comment';
                commentElement.innerHTML = `
                    <div class="comment-header">
                        <span class="comment-author">${comment.author}</span>
                        <span class="comment-date">${comment.date}</span>
                    </div>
                    <div class="comment-content">${comment.content}</div>
                    <button class="reply-btn" onclick="toggleReplyForm(${comment.id})">Reply</button>
                    <div class="reply-form" id="replyForm${comment.id}">
                        <input type="text" id="replyName${comment.id}" placeholder="Your name">
                        <textarea id="replyText${comment.id}" placeholder="Write your reply..."></textarea>
                        <button class="comment-btn" onclick="addReply(${comment.id})">Post Reply</button>
                    </div>
                    <div class="replies" id="replies${comment.id}"></div>
                `;
                
                commentsContainer.appendChild(commentElement);
                
                // Render replies
                const repliesContainer = document.getElementById(`replies${comment.id}`);
                comment.replies.forEach(reply => {
                    const replyElement = document.createElement('div');
                    replyElement.className = 'reply';
                    replyElement.innerHTML = `
                        <div class="comment-header">
                            <span class="comment-author">${reply.author}</span>
                            <span class="comment-date">${reply.date}</span>
                        </div>
                        <div class="comment-content">${reply.content}</div>
                    `;
                    repliesContainer.appendChild(replyElement);
                });
            });
        }

        function addComment() {
            const name = document.getElementById('commenterName').value.trim();
            const content = document.getElementById('commentText').value.trim();
            
            if (!name || !content) {
                alert('Please enter both name and comment.');
                return;
            }

            if (!comments[currentPostId]) {
                comments[currentPostId] = [];
            }

            const newComment = {
                id: Date.now(),
                author: name,
                content: content,
                date: new Date().toLocaleDateString(),
                replies: []
            };

            comments[currentPostId].push(newComment);
            
            document.getElementById('commenterName').value = '';
            document.getElementById('commentText').value = '';
            
            renderComments(currentPostId);
        }

        function toggleReplyForm(commentId) {
            const replyForm = document.getElementById(`replyForm${commentId}`);
            replyForm.style.display = replyForm.style.display === 'none' ? 'block' : 'none';
        }

        function addReply(commentId) {
            const name = document.getElementById(`replyName${commentId}`).value.trim();
            const content = document.getElementById(`replyText${commentId}`).value.trim();
            
            if (!name || !content) {
                alert('Please enter both name and reply.');
                return;
            }

            const comment = comments[currentPostId].find(c => c.id === commentId);
            if (comment) {
                comment.replies.push({
                    id: Date.now(),
                    author: name,
                    content: content,
                    date: new Date().toLocaleDateString()
                });
            }

            document.getElementById(`replyName${commentId}`).value = '';
            document.getElementById(`replyText${commentId}`).value = '';
            document.getElementById(`replyForm${commentId}`).style.display = 'none';
            
            renderComments(currentPostId);
        }

        document.getElementById('editPostForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const postId = parseInt(document.getElementById('editPostId').value);
            const title = document.getElementById('editPostTitle').value.trim();
            const content = document.getElementById('editPostContent').value.trim();
            const mediaFile = document.getElementById('editPostMedia').files[0];
            
            if (!title || !content) {
                alert('Please enter both title and content.');
                return;
            }

            const postIndex = blogPosts.findIndex(p => p.id === postId);
            if (postIndex === -1) return;

            blogPosts[postIndex].title = title;
            blogPosts[postIndex].content = content;

            if (mediaFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    blogPosts[postIndex].media = {
                        url: e.target.result,
                        type: mediaFile.type
                    };
                    renderBlogFeed();
                    closeEditPostModal();
                    alert('Post updated successfully!');
                };
                reader.readAsDataURL(mediaFile);
            } else {
                renderBlogFeed();
                closeEditPostModal();
                alert('Post updated successfully!');
            }
        });

        document.getElementById('newPostForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('postTitle').value.trim();
            const content = document.getElementById('postContent').value.trim();
            const mediaFile = document.getElementById('postMedia').files[0];
            
            if (!title || !content) {
                alert('Please enter both title and content.');
                return;
            }

            const newPost = {
                id: Date.now(),
                title: title,
                content: content,
                date: new Date().toLocaleDateString(),
                media: null
            };

            if (mediaFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    newPost.media = {
                        url: e.target.result,
                        type: mediaFile.type
                    };
                    blogPosts.unshift(newPost);
                    renderBlogFeed();
                    closeNewPostModal();
                };
                reader.readAsDataURL(mediaFile);
            } else {
                blogPosts.unshift(newPost);
                renderBlogFeed();
                closeNewPostModal();
            }
        });

        // Close modals when clicking outside
        window.onclick = function(event) {
            const newPostModal = document.getElementById('newPostModal');
            const blogPostModal = document.getElementById('blogPostModal');
            const editPostModal = document.getElementById('editPostModal');
            
            if (event.target == newPostModal) {
                closeNewPostModal();
            }
            if (event.target == blogPostModal) {
                closeBlogPostModal();
            }
            if (event.target == editPostModal) {
                closeEditPostModal();
            }
        }

        // Initialize the blog feed
        renderBlogFeed();
        
        // Show admin controls if logged in
        if (isAdminLoggedIn) {
            showAdminControls();
        }
    </script>
    <!-- Supabase JS Library -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

<script>
  // 🔐 Your Supabase credentials
  const SUPABASE_URL = "https://tyrrcjheeuxzjkvqfoyo.supabase.co";
  const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR5cnJjamhlZXV4emprdnFmb3lvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyNTY2ODIsImV4cCI6MjA2NzgzMjY4Mn0.6kjrOAXfg2uXDrTiwH1nlyKLKQPsHtjQsGZP706XDJU";

  // 🚀 Connect to Supabase
  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  // 🔄 Load blog posts from Supabase
  async function loadPosts() {
    const container = document.getElementById('blog-container');
    const { data: posts, error } = await supabase
      .from('posts')
      .select('*')
      .order('date', { ascending: false });

    if (error) {
      container.innerHTML = "<p>Error loading posts.</p>";
      console.error(error);
      return;
    }

    if (posts.length === 0) {
      container.innerHTML = "<p>No blog posts yet.</p>";
      return;
    }

    container.innerHTML = ""; // Clear loading message

    posts.forEach(post => {
      const div = document.createElement('div');
      div.className = 'post';
      div.innerHTML = `
        <h2>${post.title}</h2>
        <p><em>${new Date(post.date).toLocaleDateString()}</em></p>
        <p>${post.content}</p>
      `;
      container.appendChild(div);
    });
  }

  // 📦 Run the function when the page loads
  loadPosts();
</script>

</body>
</html>